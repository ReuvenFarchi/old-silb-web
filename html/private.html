<!DOCTYPE html>
<html lang="en">
<head>
    <title> Private </title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
<div class="message-box">

    <form action="/changePassword" method="post">
        <div class="title">
            <h2>Cambiar Contraseña</h2>
        </div>
        <div class="field">
            <label for="oldPassword">Contraseña Actual:</label>
            <input type="password" name="oldPassword" id="oldPassword" required autocomplete="current-password"/>
            <br/>
        </div>
        <div class="field">
            <label for="newPassword">Nueva Contraseña:</label>
            <input type="password" name="newPassword" id="newPassword" required autocomplete="new-password" pattern=".{8,}" title="Largo mínimo 8 caracteres"/>
            <br/>
        </div>
        <div class="field">
            <label for="passwordValidate">Repetir Nueva Contraseña:</label>
            <input type="password" name="passwordValidate" id="passwordValidate" required autocomplete="new-password" pattern=".{8,}" title="Largo mínimo 8 caracteres"/>
        </div>
        <div class="field">
            <label id="error-message"></label>
            <input class="submit-btn" type="submit" value="Submit" required/>
        </div>

    </form>


    <a href="/">Inicio</a>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const info = urlParams.get('info');
    let errorMsg = ''
    let msgColor =  '#E91E63';
    switch (info) {
        case 'success' :
            errorMsg = 'Contraseña Actualizada con éxito';
            msgColor = '#48c71a';
            break;
        case  'oldPasswordFail':
            errorMsg = 'Contraseña anterior errónea, por favor, inténtelo de nuevo';
            break;
        case 'noMatch':
            errorMsg = 'La nueva contraseña no coincide con el campo de verificación, por favor, inténtelo de nuevo';
            break;
        case 'samePassword':
            errorMsg = 'La nueva contraseña es igual que la anterior, por favor, inténtelo de nuevo';
            break;
    }

    if (info) {
        const errorMessage = document.getElementById("error-message");
        errorMessage.innerText = errorMsg;
        errorMessage.style.color = msgColor;
        errorMessage.style.display = "block";
    }
</script>
</body>
</html>